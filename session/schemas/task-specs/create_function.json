{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://claude.ai/session-plugin/schemas/task-specs/create_function.json",
  "title": "CreateFunctionSpec",
  "description": "Lean specification for creating a function",
  "type": "object",
  "required": ["function", "does"],
  "properties": {
    "function": {
      "type": "string",
      "description": "Function name"
    },
    "exported": {
      "type": "boolean",
      "default": true,
      "description": "Whether to export the function"
    },
    "async": {
      "type": "boolean",
      "default": false,
      "description": "Whether function is async"
    },
    "params": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Parameters with types, e.g. ['userId: string', 'options?: Options']"
    },
    "returns": {
      "type": "string",
      "description": "Return type, e.g. 'Promise<User>' or 'void'"
    },
    "generics": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Generic type parameters, e.g. ['T extends Base']"
    },
    "does": {
      "type": "string",
      "description": "What the function does (behavior description)"
    },
    "steps": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Implementation steps in order"
    },
    "throws": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Errors this function can throw"
    },
    "imports": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Required imports, e.g. ['supabase from ../lib/supabase']"
    },
    "calls": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Functions/methods this should call"
    },
    "patterns": {
      "type": "array",
      "items": { "type": "string" },
      "description": "File paths to similar functions to follow as patterns"
    }
  }
}
